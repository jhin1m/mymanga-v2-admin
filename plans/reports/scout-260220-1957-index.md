# MyManga Admin Panel - Scout Report Index

**Generated:** 2026-02-20 19:57  
**Project:** Admin MyManga Panel  
**Tech Stack:** Angular 21 + NG-ZORRO + ng-alain (Standalone Components)

---

## Reports Available

### 1. **Main Patterns Report**
ðŸ“„ `scout-260220-1957-mymanga-patterns.md`

Comprehensive analysis of all patterns, including:
- Directory structure
- Routing patterns
- Service architecture
- Page component patterns
- Template structures
- Modal/form patterns
- Shared components
- Best practices

**Use this for:** Understanding the overall architecture and design decisions

---

### 2. **Code Snippets Reference**
ðŸ“„ `scout-260220-1957-code-snippets.md`

Ready-to-use code templates for:
- Services (API layer)
- List components with search
- HTML templates
- Modal forms
- Pagination component
- Route configuration
- Menu items
- LESS styling

**Use this for:** Copy-paste templates when creating new features

---

## Quick Navigation

### By Task

#### I need to create a new list/management page
1. Read section 5 in **Patterns Report** - "Page Component Pattern"
2. Use template #2 in **Code Snippets** - "List Component"
3. Reference snippet #3 - "List Template (HTML)"
4. Copy snippet #10 for service setup

#### I need to add routing for a new page
1. Read section 2 in **Patterns Report** - "Routing Pattern"
2. Use snippet #6 - "Route Configuration"
3. Update `src/app/app.routes.ts`

#### I need to add a menu item
1. Read section 3 in **Patterns Report** - "Sidebar Menu Pattern"
2. Use snippet #7 - "Startup Menu Service"
3. Update `src/app/core/startup/startup.service.ts`

#### I need to create a service
1. Read section 4 in **Patterns Report** - "Service Pattern"
2. Use snippet #10 - "Complete Service Template"
3. Create file in `src/app/core/services/`

#### I need to create a modal form
1. Read section 7 in **Patterns Report** - "Modal/Form Pattern"
2. Use snippet #4 - "Modal Form Pattern"

#### I need to understand the HTML structure
1. Read section 6 in **Patterns Report** - "HTML Template Pattern"
2. Use snippet #3 - "List Template (HTML)"

---

## Key Concepts at a Glance

### Architecture
- **Components:** Standalone (no NgModules)
- **State Management:** Angular signals (`signal()`)
- **HTTP Client:** Typed observables with error handling
- **Routing:** Lazy-loaded components with auth guard
- **UI Framework:** NG-ZORRO (Ant Design for Angular)

### Component Patterns
- **List pages:** Search form + paginated table
- **Actions:** Inline buttons with `nz-popconfirm`
- **Forms:** Modal components with `NZ_MODAL_DATA` injection
- **Pagination:** Shared `PaginationBarComponent`

### API Patterns
- **Response format:** Spatie QueryBuilder (Laravel)
- **Filtering:** `filter[field_name]=value` query params
- **Pagination:** `page` and `per_page` params
- **Relations:** `include=relation1,relation2` param
- **Sorting:** `sort=-field` (- prefix = DESC)

### State Management
1. Signals: `signal<T>()`
2. Service injection: `inject(ServiceClass)`
3. Form state: `FormBuilder.group()`
4. Signal updates: `.set()` method
5. Template access: Call signal as function `{{ signal() }}`

---

## File Locations Quick Reference

### Pages
- `/src/app/pages/{feature}/{feature}.ts` - Component
- `/src/app/pages/{feature}/{feature}.html` - Template
- `/src/app/pages/{feature}/{feature}.less` - Styles

### Services
- `/src/app/core/services/{feature}.service.ts` - API service

### Shared
- `/src/app/shared/pagination-bar/pagination-bar.ts` - Reusable pagination

### Configuration
- `/src/app/app.routes.ts` - Route definitions
- `/src/app/core/startup/startup.service.ts` - Menu initialization
- `/src/app/core/models/api-types.ts` - Shared API types

---

## Existing Pages Reference

| Page | Purpose | Pattern | Service |
|------|---------|---------|---------|
| Members | User management | List + actions | `members.service.ts` |
| Artists | Artist management | List + modal CRUD | `artists.service.ts` |
| Genres | Genre management | List + modal form | `genres.service.ts` |
| Groups | Translation groups | List + ? | `groups.service.ts` |
| Achievements | Badges/achievements | List + ? | `achievements.service.ts` |
| Pets | Companion items | List + ? | `pets.service.ts` |
| Doujinshi | Doujinshi management | List + ? | `doujinshis.service.ts` |
| Comments | Comment moderation | List with delete | `comments.service.ts` |
| Manga | Manga list & filtering | Complex list | `manga.service.ts` |

---

## NG-ZORRO Components Used

### Containers
- `NzCardModule` - Card container with title
- `NzGridModule` - Responsive grid layout

### Forms
- `NzFormModule` - Form layout
- `NzInputModule` - Text input
- `NzSelectModule` - Dropdown
- `NzSwitchModule` - Toggle switch

### Tables & Lists
- `NzTableModule` - Data table with pagination
- `NzPaginationModule` - Pagination control

### Buttons & Actions
- `NzButtonModule` - Buttons
- `NzIconModule` - Icons
- `NzPopconfirmModule` - Confirmation dialog
- `NzMessageService` - Toast notifications

### Display
- `NzTagModule` - Status tags
- `NzAvatarModule` - User avatars
- `NzModalService` - Modal dialogs

---

## Common Workflows

### Search + List Flow
```
User Input â†’ Submit Form â†’ Reset Page to 1 â†’ Load Data from Service â†’ Update Signal â†’ Template Re-renders
```

### Pagination Flow
```
User Changes Page/Size â†’ Update Signal â†’ Load Data from Service â†’ Update Data Signal â†’ Table Re-renders
```

### Delete/Action Flow
```
User Clicks Button â†’ Popconfirm Dialog â†’ Confirm â†’ Call Service â†’ On Success: Reload Data â†’ Show Message
```

### Modal CRUD Flow
```
Click Create/Edit â†’ Open Modal â†’ Fill Form â†’ Submit â†’ Validate â†’ Call Service â†’ On Success: Reload Data & Close Modal
```

---

## Development Checklist for New Page

- [ ] Create service in `/src/app/core/services/{feature}.service.ts`
  - Define interfaces for data and params
  - Implement HTTP methods
- [ ] Create page component in `/src/app/pages/{feature}/{feature}.ts`
  - Define signals for state
  - Implement load/search/reset/pagination methods
  - Inject service and message service
- [ ] Create template `/src/app/pages/{feature}/{feature}.html`
  - Search/filter card with form
  - Pagination bar at top
  - Data table with columns
  - Pagination bar at bottom
- [ ] Create styles `/src/app/pages/{feature}/{feature}.less`
  - Search actions layout
  - Table card margin
  - Action buttons spacing
- [ ] Add route in `/src/app/app.routes.ts`
  - Lazy-load component under admin layout
- [ ] Add menu item in `/src/app/core/startup/startup.service.ts`
  - Choose correct menu group
  - Set icon and link

---

## Common Issues & Solutions

### Issue: Signals not updating in template
**Solution:** Ensure you're calling signal as function: `{{ signal() }}`

### Issue: Form filters not being sent to API
**Solution:** Check that filter params are only added if they have values:
```typescript
if (formValue.name) params['filter[name]'] = formValue.name;
```

### Issue: Modal form not closing
**Solution:** Ensure `nzOnOk` callback returns `Promise<boolean>` that resolves to `true`

### Issue: Table not showing data
**Solution:** Check that:
1. Component imports `NzTableModule`
2. Signal is called in template: `[nzData]="items()`
3. Template uses `@for` to iterate: `@for (item of table.data; track item.id)`

### Issue: NG-ZORRO styles not loading
**Solution:** Ensure `angular.json` has LESS configuration and theme imports

---

## API Endpoint Patterns

All endpoints follow this pattern:
```
Base: ${environment.apiUrl}/api/admin

GET    /api/admin/{resource}                    - List with filters
GET    /api/admin/{resource}/{id}               - Get single item
POST   /api/admin/{resource}                    - Create item
PUT    /api/admin/{resource}/{id}               - Update item
DELETE /api/admin/{resource}/{id}               - Delete item
POST   /api/admin/{resource}/{id}/{action}      - Custom action (e.g., ban)
```

### Query String Format
```
?page=1
&per_page=20
&sort=-created_at
&include=relation1,relation2
&filter[name]=value
&filter[status]=1
```

---

## Performance Tips

1. **Use `track` in @for loops** to prevent unnecessary re-renders
2. **Lazy-load routes** - all pages already use lazy loading
3. **Use `input()` instead of `@Input()`** for signal-based inputs
4. **Avoid unnecessary subscriptions** - use component local signals
5. **Unsubscribe from observables** - though with signals this is less critical

---

## Testing Quick Start

All test files are co-located with source:
- `{component}.spec.ts` next to `{component}.ts`

Common patterns to test:
- Service HTTP calls
- Component signal updates
- Form validation
- Filter building logic

---

## Resources

### Official Docs
- [Angular 21 Docs](https://angular.io/docs)
- [NG-ZORRO Docs](https://ng.ant.design/)
- [ng-alain Docs](https://ng-alain.com/)
- [TypeScript Strict Mode](https://www.typescriptlang.org/tsconfig#strict)

### In-Codebase
- `/src/CLAUDE.md` - Project conventions
- `/src/README.md` - Dev instructions
- `angular.json` - Build configuration
- `tsconfig.json` - TypeScript settings

---

## Questions & Notes

### Unresolved Questions
None at this time - all patterns are clearly established and consistent.

### Notes
- All components use standalone pattern (no NgModules)
- Signals are the primary state management tool
- NG-ZORRO provides consistent UI/UX across all pages
- API backend uses Spatie QueryBuilder (Laravel)
- Vietnamese language used throughout UI

---

**End of Scout Report Index**

Generated: 2026-02-20  
Status: Complete & Ready for Development
